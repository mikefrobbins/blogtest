---
ID: 5385
post_title: >
  Use PowerShell to Display IIS
  Application Pool Identity Account
  Passwords in Clear Text
author: Mike F Robbins
post_excerpt: ""
layout: post
permalink: >
  https://mikefrobbins.com/2012/09/18/use-powershell-to-display-iis-application-pool-identity-account-passwords-in-clear-text/
published: true
post_date: 2012-09-18 07:30:41
---
It's fairly common to see the identity for an IIS application pool changed to a domain user account. The following image shows three application pools, the DefaultAppPool has the default settings, the www app pool has a Managed Service Account specified, and the wwwDev app pool has a standard domain user account specified:

<a href="http://mikefrobbins.com/wp-content/uploads/2012/09/apppool-identity1.jpg"><img class="alignnone size-full wp-image-5386" title="apppool-identity1" alt="" src="http://mikefrobbins.com/wp-content/uploads/2012/09/apppool-identity1.jpg" width="515" height="178" /></a>

When a standard user account is specified, the password is entered as shown below:

<a href="http://mikefrobbins.com/wp-content/uploads/2012/09/apppool-identity2.jpg"><img class="alignnone size-full wp-image-5387" title="apppool-identity2" alt="" src="http://mikefrobbins.com/wp-content/uploads/2012/09/apppool-identity2.jpg" width="343" height="258" /></a>

I've used what you would think is a super secure password, generated by KeePass:

<a href="http://mikefrobbins.com/wp-content/uploads/2012/09/apppool-identity3.jpg"><img class="alignnone size-full wp-image-5388" title="apppool-identity3" alt="" src="http://mikefrobbins.com/wp-content/uploads/2012/09/apppool-identity3.jpg" width="503" height="257" /></a>

When a Managed Service Account is used, it's specified without having to enter the password. The account name is specified with a trailing dollar sign:

<a href="http://mikefrobbins.com/wp-content/uploads/2012/09/apppool-identity4.jpg"><img class="alignnone size-full wp-image-5389" title="apppool-identity4" alt="" src="http://mikefrobbins.com/wp-content/uploads/2012/09/apppool-identity4.jpg" width="343" height="258" /></a>

Now let's see how insecure hard coding a user id and password is:

First, I'm going to add the Web-WMI feature to the IIS server so the WMI namespace and class I'm looking for will exist. This also adds a couple of additional prerequisite features:
<pre class="lang:ps decode:true">Add-WindowsFeature Web-WMI | Format-List</pre>
<a href="http://mikefrobbins.com/wp-content/uploads/2012/09/apppool-identity5.jpg"><img class="alignnone size-full wp-image-5390" title="apppool-identity5" alt="" src="http://mikefrobbins.com/wp-content/uploads/2012/09/apppool-identity5.jpg" width="640" height="80" /></a>

Now to display (in clear text) the hard coded, super secure password that I generated:
<pre class="lang:ps decode:true">Get-CimInstance -Namespace root/MicrosoftIISv2 -ClassName IIsApplicationPoolSetting -Property Name, WAMUserName, WAMUserPass |
select Name, WAMUserName, WAMUserPass</pre>
<a href="http://mikefrobbins.com/wp-content/uploads/2012/09/apppool-identity6.jpg"><img class="alignnone size-full wp-image-5391" title="apppool-identity6" alt="" src="http://mikefrobbins.com/wp-content/uploads/2012/09/apppool-identity6.jpg" width="587" height="124" /></a>

If I'm able to retrieve this information with WMI, it has to be stored in clear text somewhere and there's probably other ways of displaying it. This is just another reason why you should be using Managed Service Accounts for your IIS application pool identities.

Âµ